7. 舵机校准（重要）
===================================

.. note::

    如果你的 Robot HAT 版本为 V44 或更高（扬声器位于电路板顶部），并且带有板载 **Zero** 按钮，则可以跳过本步骤，直接按下 **Zero** 按钮即可启动舵机归零程序。

    .. image:: img/robot_hat_v44.png
        :width: 500
        :align: center


舵机的角度范围是 -90° ~ 90°，但出厂时的默认角度是随机的，可能是 0°，也可能是 45°。如果在未校准的情况下直接组装，那么在运行代码时，舵机可能会出现错乱，甚至会卡死烧毁。

因此，我们需要先将所有舵机的角度设置为 0° 后再进行安装，这样舵机角度会处于中位，无论向左或向右转动都能保持正常。

#. 为了确保舵机正确归零，首先将舵机臂插入舵机轴中，然后轻轻转动舵机臂到不同角度。这样做是为了便于直观地观察舵机是否在转动。

    .. image:: img/servo_arm.png
        :align: center


#. 接下来，在 ``examples/`` 文件夹中运行 ``servo_zeroing.py``。

    .. raw:: html

        <run></run>

    .. code-block::

        cd ~/picrawler/examples
        sudo python3 servo_zeroing.py

#. 然后，将舵机线缆插入 P11 端口，如下图所示，同时你会看到舵机臂转动到某个位置（即为 0° 位置，但该位置是随机的，可能不垂直或不平行）。

    .. image:: img/servo_pin11.jpg


#. 现在，取下舵机臂，保持舵机线缆连接并且电源不断开。随后根据纸质说明书继续进行组装。

.. note::

    * 在舵机用螺丝固定之前，不要拔掉舵机线缆；固定好之后即可拔出。
    * 在舵机通电的情况下，不要强行转动舵机，否则可能损坏。如果舵机轴未正确插入角度，请拔出并重新安装。
    * 每次安装舵机前，都需要将舵机线缆插入 PWM 引脚并开启电源，以确保舵机角度已归零至 0°。


